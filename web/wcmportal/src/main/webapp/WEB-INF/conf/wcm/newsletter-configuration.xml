<?xml version="1.0" encoding="ISO-8859-1"?>

<configuration>
	<component>
		<type>org.exoplatform.services.wcm.newsletter.NewsletterInitializationService</type>
		<init-params>
			<values-param>
        <name>portalNames</name>
        <value>classic</value>
        <value>acme</value>
        <value>backoffice</value>	        
      </values-param>
			<object-param>
				<name>category1</name>
				<description>category1</description>
				<object type="org.exoplatform.services.wcm.newsletter.NewsletterCategoryConfig">
					<field name="name"><string>category1</string></field>
					<field name="title"><string>category1</string></field>
					<field name="description"><string>category1's description</string></field>
					<field name="moderator"><string>root</string></field>
				</object>
			</object-param>
			<object-param>
				<name>category2</name>
				<description>category2</description>
				<object type="org.exoplatform.services.wcm.newsletter.NewsletterCategoryConfig">
					<field name="name"><string>category2</string></field>
					<field name="title"><string>category2</string></field>
					<field name="description"><string>category2's description</string></field>
					<field name="moderator"><string>root</string></field>
				</object>
			</object-param>
			<object-param>
				<name>subscription1</name>
				<description>subscription1</description>
				<object type="org.exoplatform.services.wcm.newsletter.NewsletterSubscriptionConfig">
					<field name="name"><string>subscription1</string></field>
					<field name="title"><string>subscription1</string></field>
					<field name="description"><string>subscription1's description</string></field>
					<field name="categoryName"><string>category1</string></field>
				</object>
			</object-param>
			<object-param>
				<name>subscription2</name>
				<description>subscription2</description>
				<object type="org.exoplatform.services.wcm.newsletter.NewsletterSubscriptionConfig">
					<field name="name"><string>subscription2</string></field>
					<field name="title"><string>subscription2</string></field>
					<field name="description"><string>subscription2's description</string></field>
					<field name="categoryName"><string>category2</string></field>
				</object>
			</object-param>
			<object-param>
				<name>user1@gmail.com</name>
				<description>user1@gmail.com</description>
				<object type="org.exoplatform.services.wcm.newsletter.config.NewsletterUserConfig">
					<field name="mail"><string>user1@gmail.com</string></field>
				</object>
			</object-param>
			<object-param>
				<name>user2@gmail.com</name>
				<description>user2@gmail.com</description>
				<object type="org.exoplatform.services.wcm.newsletter.config.NewsletterUserConfig">
					<field name="mail"><string>user2@gmail.com</string></field>
				</object>
			</object-param>
		</init-params>
	</component>
	
	<external-component-plugins>
		<target-component>org.exoplatform.services.wcm.portal.artifacts.PortalArtifactsInitializerService</target-component>
		<component-plugin>
			<name>Initial newsletter data for each site</name>
			<set-method>addPlugin</set-method>
			<type>org.exoplatform.services.wcm.newsletter.InitialNewsletterPlugin</type>
			<description>This plugin deploy newsletter data of portal when a portal is created</description>
			<init-params>
				<object-param>
					<name>category1</name>
					<description>category1</description>
					<object type="org.exoplatform.services.wcm.newsletter.NewsletterCategoryConfig">
						<field name="name">
							<string>category1</string>
						</field>
						<field name="title">
							<string>category1</string>
						</field>
						<field name="description">
							<string>category1's description</string>
						</field>
						<field name="moderator">
							<string>root</string>
						</field>
					</object>
				</object-param>
				<object-param>
					<name>category2</name>
					<description>category2</description>
					<object type="org.exoplatform.services.wcm.newsletter.NewsletterCategoryConfig">
						<field name="name">
							<string>category2</string>
						</field>
						<field name="title">
							<string>category2</string>
						</field>
						<field name="description">
							<string>category2's description</string>
						</field>
						<field name="moderator">
							<string>root</string>
						</field>
					</object>
				</object-param>
				<object-param>
					<name>subscription1</name>
					<description>subscription1</description>
					<object type="org.exoplatform.services.wcm.newsletter.NewsletterSubscriptionConfig">
						<field name="name">
							<string>subscription1</string>
						</field>
						<field name="title">
							<string>subscription1</string>
						</field>
						<field name="description">
							<string>subscription1's description</string>
						</field>
						<field name="categoryName">
							<string>category1</string>
						</field>
					</object>
				</object-param>
				<object-param>
					<name>subscription2</name>
					<description>subscription2</description>
					<object type="org.exoplatform.services.wcm.newsletter.NewsletterSubscriptionConfig">
						<field name="name">
							<string>subscription2</string>
						</field>
						<field name="title">
							<string>subscription2</string>
						</field>
						<field name="description">
							<string>subscription2's description</string>
						</field>
						<field name="categoryName">
							<string>category2</string>
						</field>
					</object>
				</object-param>
				<object-param>
					<name>user1@gmail.com</name>
					<description>user1@gmail.com</description>
					<object type="org.exoplatform.services.wcm.newsletter.config.NewsletterUserConfig">
						<field name="mail">
							<string>user1@gmail.com</string>
						</field>
					</object>
				</object-param>
				<object-param>
					<name>user2@gmail.com</name>
					<description>user2@gmail.com</description>
					<object type="org.exoplatform.services.wcm.newsletter.config.NewsletterUserConfig">
						<field name="mail">
							<string>user2@gmail.com</string>
						</field>
					</object>
				</object-param>
			</init-params>
		</component-plugin>
	</external-component-plugins>
	
	<external-component-plugins>
		<target-component>org.exoplatform.services.wcm.deployment.WCMContentInitializerService</target-component>
		<component-plugin>
			<name>Content Initializer Service</name>
			<set-method>addPlugin</set-method>
			<type>org.exoplatform.services.wcm.deployment.plugins.XMLDeploymentPlugin</type>
			<description>XML Deployment Plugin</description>
			<init-params>
				<object-param>
					<name>Demo newsletter for classic site</name>
					<description>Deployment Descriptor</description>
					<object type="org.exoplatform.services.deployment.DeploymentDescriptor">
						<field name="target">
							<object type="org.exoplatform.services.deployment.DeploymentDescriptor$Target">
								<field name="repository"><string>repository</string></field>
								<field name="workspace"><string>collaboration</string></field>
								<field name="nodePath"><string>/sites content/live/classic/ApplicationData/NewsletterApplication/DefaultTemplates</string></field>
							</object>
						</field>
						<field name="sourcePath">
							<string>war:/conf/wcm/artifacts/site-resources/classic/Introduce.xml</string>
						</field>
					</object>
				</object-param>
				<object-param>
					<name>Demo newsletter for acme site</name>
					<description>Deployment Descriptor</description>
					<object type="org.exoplatform.services.deployment.DeploymentDescriptor">
						<field name="target">
							<object type="org.exoplatform.services.deployment.DeploymentDescriptor$Target">
								<field name="repository"><string>repository</string></field>
								<field name="workspace"><string>collaboration</string></field>
								<field name="nodePath"><string>/sites content/live/acme/ApplicationData/NewsletterApplication/DefaultTemplates</string></field>
							</object>
						</field>
						<field name="sourcePath">
							<string>war:/conf/wcm/artifacts/site-resources/acme/Introduce.xml</string>
						</field>
					</object>
				</object-param>
				<object-param>
					<name>Demo newsletter for backoffice site</name>
					<description>Deployment Descriptor</description>
					<object type="org.exoplatform.services.deployment.DeploymentDescriptor">
						<field name="target">
							<object type="org.exoplatform.services.deployment.DeploymentDescriptor$Target">
								<field name="repository"><string>repository</string></field>
								<field name="workspace"><string>collaboration</string></field>
								<field name="nodePath"><string>/sites content/live/backoffice/ApplicationData/NewsletterApplication/DefaultTemplates</string></field>
							</object>
						</field>
						<field name="sourcePath">
							<string>war:/conf/wcm/artifacts/site-resources/classic/Introduce.xml</string>
						</field>
					</object>
				</object-param>
			</init-params>
		</component-plugin>
	</external-component-plugins>
	
	<external-component-plugins>
		<target-component>org.exoplatform.services.wcm.portal.artifacts.PortalArtifactsInitializerService</target-component>    
			<component-plugin> 
				<name>Initial demo newsletter for each site</name>
				<set-method>addPlugin</set-method>
				<type>org.exoplatform.services.wcm.portal.artifacts.InitialWebContentPlugin</type>
				<description>This plugin deploy demo newsletter for portal when a portal is created</description>
        <init-params>
          <object-param>        
            <name>Demo newsletter for new site</name>
            <description>Deployment Descriptor</description>
            <object type="org.exoplatform.services.deployment.DeploymentDescriptor">
              <field  name="target">
              	<object type="org.exoplatform.services.deployment.DeploymentDescriptor$Target">
              		<field  name="repository"><string>repository</string></field>
              		<field  name="workspace"><string>collaboration</string></field>
              		<field  name="nodePath"><string>/sites content/live/{portalName}/ApplicationData/NewsletterApplication/DefaultTemplates</string></field>
              	</object>
              </field>
              <field name="sourcePath">
              	<string>war:/conf/wcm/artifacts/site-resources/acme/Introduce.xml</string>
              </field>
					</object>
				</object-param>
			</init-params>
		</component-plugin> 
	</external-component-plugins>
	
</configuration>