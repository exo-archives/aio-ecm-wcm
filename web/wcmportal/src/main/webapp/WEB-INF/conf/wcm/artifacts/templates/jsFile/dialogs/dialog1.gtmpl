<%
  String[] hiddenField1 = ["jcrPath=/node/jcr:content", "nodetype=nt:resource", "mixintype=dc:elementSet", "visible=false"] ; 
  String[] hiddenField2 = ["jcrPath=/node/jcr:content/jcr:encoding", "visible=false", "UTF-8"] ;  
  String[] hiddenField4 = ["jcrPath=/node/jcr:content/jcr:lastModified", "visible=false"] ;
  String[] hiddenField5 = ["jcrPath=/node/jcr:content/dc:date", "visible=false"] ;
  String[] hiddenField6 = ["jcrPath=/node/jcr:content/jcr:mimeType", "visible=false", "text/javascript"] ;
  uicomponent.addHiddenField("hiddenInput1", hiddenField1) ;
  uicomponent.addHiddenField("hiddenInput6", hiddenField6) ;
  uicomponent.addHiddenField("hiddenInput2", hiddenField2) ;
  uicomponent.addCalendarField("hiddenInput4", hiddenField4) ;
  uicomponent.addCalendarField("hiddenInput5", hiddenField5) ;
%>
<style>
	.UIForm .HorizontalLayout textarea { 
	  font-size:11px;
	  height:275px;
	  width:525px;
	 }
</style>
<div class="UIFormWithTitle">  
  <% uiform.begin() %>
  <div class="HorizontalLayout" style="border:0px;">
    <table class="UIFormGrid">
        <tr>
          <td class="FieldLabel"><%=_ctx.appRes("JSFile.dialog.label.name")%></td>
          <td class="FieldComponent">
            <%
              String[] fieldName = ["jcrPath=/node", "nodetype=nt:file", "editable=if-null", "validate=name"] ;
              uicomponent.addTextField("name", fieldName) ; 
            %>
          </td>
        </tr>      
        <tr>
          <td class="FieldLabel"><%=_ctx.appRes("JSFile.dialog.label.content")%></td>
          <td class="FieldComponent">
            <%
              if(uicomponent.isEditing()) { 
                def curNode = uicomponent.getNode() ;
                if(curNode.hasNode("jcr:content")) {
                  def content = curNode.getNode("jcr:content") ;                                      
                  String[] fieldSummary = ["jcrPath=/node/jcr:content/jcr:data", "validate=empty"] ;
                  uicomponent.addTextAreaField("contentHtml", fieldSummary) ;                                                       
                  } 
                }else {                           
                String[] fieldSummary = ["jcrPath=/node/jcr:content/jcr:data"] ;
                uicomponent.addTextAreaField("contentHtml", fieldSummary) ;                
              }
            %>      
          </td>
        </tr>
        <tr>
        	<td class="FieldLabel"><%=_ctx.appRes("JSFile.dialog.label.priority")%></td>
        	<td class="FieldComponent">
        		<%
        			String[] fieldPriority = ["jcrPath=/node/exo:priority"] ;
        			uicomponent.addTextField("JSpriority", fieldPriority) ;
        		%>
        	</td>
        </tr>          
        <tr>
        	<td class="FieldLabel"><%=_ctx.appRes("JSFile.dialog.label.active")%></td>
        	<td class="FieldComponent">
        		<%
        			String[] fieldActive = ["jcrPath=/node/exo:active", "options=true,false", "onchange=true"] ;
        			uicomponent.addSelectBoxField("activeJS", fieldActive) ;
        		%>
        	</td>
        </tr>
    </table>       
    <%/* start render action*/%>
    <div class="UIAction" style="display:block;"> 
      <table class="ActionContainer" align="center">
        <tr>
          <td align="center">
            <% for(action in uicomponent.getActions()) { 
                 String actionLabel = _ctx.appRes(uicomponent.getName() + ".action." + action) ;
                 String link = uicomponent.event(action) ;
            %>
              <a href="$link" class="ActionButton LightBlueStyle">
                <div class="ButtonLeft">
                  <div class="ButtonRight">
                    <div class="ButtonMiddle">
                      $actionLabel
                    </div>
                  </div>
                </div>
              </a>
            <%}%>          
          </td>
        </tr>
      </table>
    </div>
    <%/* end render action*/%>
  </div>
  <%uiform.end()%>
</div>